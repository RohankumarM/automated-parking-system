(this["webpackJsonpsmart-parking-system"]=this["webpackJsonpsmart-parking-system"]||[]).push([[0],{114:function(e,t,a){e.exports=a.p+"static/media/parking-space.3ff6560a.svg"},116:function(e,t,a){e.exports=a.p+"static/media/booking.3f1464be.svg"},207:function(e,t,a){e.exports=a(258)},212:function(e,t,a){},223:function(e,t,a){},229:function(e,t,a){},230:function(e,t,a){},231:function(e,t,a){},232:function(e,t,a){},249:function(e,t,a){},256:function(e,t,a){},257:function(e,t,a){},258:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(11),r=a.n(c),o=(a(212),a(8)),i=a(17),s=a(27),u=a(86),m=a.n(u),d=a(94),g=a.n(d),p=a(96),E=a.n(p),f=a(95),b=a.n(f),h=Object(n.createContext)({isLoggedIn:!1,login:function(){},logout:function(){},signUp:function(){},userID:""}),v=a(56),k=v.initializeApp({apiKey:"AIzaSyAJl_vD4QXRL_PovEIoKQpmFjyIrFjIGU8",authDomain:"smart-parking-system-9d0dc.firebaseapp.com",databaseURL:"https://smart-parking-system-9d0dc.firebaseio.com",projectId:"smart-parking-system-9d0dc",storageBucket:"smart-parking-system-9d0dc.appspot.com",messagingSenderId:"21371711572",appId:"1:21371711572:web:ab332dda330005b8a3fdc1",measurementId:"G-P1QTKM6TGT"}),N=(a(223),function(e){e.userID,Object(i.g)(),Object(n.useContext)(h);var t=Object(n.useState)(""),a=Object(o.a)(t,2),c=(a[0],a[1]),r=Object(n.useState)(""),s=Object(o.a)(r,2),u=s[0],d=s[1],p=Object(n.useState)(""),f=Object(o.a)(p,2),N=f[0],O=f[1],y=Object(n.useState)(""),j=Object(o.a)(y,2),S=j[0],P=j[1],w=Object(n.useState)(""),C=Object(o.a)(w,2),I=C[0],L=C[1],x=Object(n.useState)(""),T=Object(o.a)(x,2),A=T[0],M=T[1],D=Object(n.useState)(""),B=Object(o.a)(D,2),F=B[0],W=B[1],q=function(){M(""),W("")},_=function(){k.auth().onAuthStateChanged((function(e){e?(P(""),L("")):c("")}))};Object(n.useEffect)((function(){_()}),[]);var R=Object(n.useRef)(null),U=Object(n.useRef)(null),Y=Object(n.useRef)(null);return l.a.createElement("div",{className:"login",ref:U},l.a.createElement("div",{className:"form-container"},l.a.createElement("div",{className:"form-login-signup"},l.a.createElement("form",{action:"",className:"login-form",onSubmit:function(e){e.preventDefault(),q(),k.auth().setPersistence(v.auth.Auth.Persistence.LOCAL).then((function(){return k.auth().signInWithEmailAndPassword(S,I).then((function(e){})).catch((function(e){switch(e.code){case"auth/invalid-user":case"auth/user-disabled":case"auth/user-not-found":M(e.message);break;case"auth/wrong-password":W(e.message)}}))})).catch((function(e){return console.log(e)}))}},l.a.createElement("h2",{className:"title"},"Login"),l.a.createElement("div",{className:"input-field"},l.a.createElement(m.a,{className:"icon"}),l.a.createElement("input",{autoFocus:!0,required:!0,type:"email",placeholder:"Email",value:S,onChange:function(e){return P(e.target.value)}}),l.a.createElement("p",{className:"errorMsg"},A)),l.a.createElement("div",{className:"input-field"},l.a.createElement(g.a,{className:"icon"}),l.a.createElement("input",{type:"password",value:I,placeholder:"Password",onChange:function(e){return L(e.target.value)},required:!0}),l.a.createElement("p",{className:"errorMsg"},F)),l.a.createElement("input",{type:"submit",value:"Login",className:"login_btn"}),l.a.createElement("p",{className:"social_login"},"Or Sign In With Social Platforms"),l.a.createElement("div",{className:"social-media"},l.a.createElement("a",{href:"/login",className:"social-icon"},l.a.createElement(b.a,null)),l.a.createElement("a",{href:"/login",className:"social-icon"},l.a.createElement(E.a,null)))),l.a.createElement("form",{action:"",className:"signup-form",onClick:function(e){e.preventDefault(),q(),k.auth().createUserWithEmailAndPassword(S,I).then((function(e){k.database().ref("users/"+e.user.uid).set({username:u,numberPlate:N,email:S})})).catch((function(e){switch(e.code){case"auth/email-already-in-use":case"auth/invalid-user":M(e.message);break;case"auth/weak-password":W(e.message)}}))}},l.a.createElement("h2",{className:"title"},"Signup"),l.a.createElement("div",{className:"input-field"},l.a.createElement(m.a,{className:"icon"}),l.a.createElement("input",{type:"text",placeholder:"Username",onChange:function(e){return d(e.target.value)}})),l.a.createElement("div",{className:"input-field"},l.a.createElement("img",{className:"number-plate",src:"https://cdn.iconscout.com/icon/premium/png-256-thumb/number-plate-1582888-1337733.png",alt:"number plate"}),l.a.createElement("input",{type:"text",placeholder:"Number Plate",required:!0,onChange:function(e){return O(e.target.value)}})),l.a.createElement("div",{className:"input-field"},l.a.createElement(m.a,{className:"icon"}),l.a.createElement("input",{type:"email",value:S,placeholder:"Email",required:!0,onChange:function(e){return P(e.target.value)}})),l.a.createElement("div",{className:"input-field"},l.a.createElement(g.a,{className:"icon"}),l.a.createElement("input",{type:"password",value:I,placeholder:"Password",required:!0,onChange:function(e){return L(e.target.value)}})),l.a.createElement("input",{type:"submit",value:"SignUp",className:"login_btn"}),l.a.createElement("p",{className:"social_login"},"Or Sign In With Social Platforms"),l.a.createElement("div",{className:"social-media"},l.a.createElement("a",{href:"/login",className:"social-icon"},l.a.createElement(b.a,null)),l.a.createElement("a",{href:"/login",className:"social-icon"},l.a.createElement(E.a,null)))))),l.a.createElement("div",{className:"panels-container"},l.a.createElement("div",{className:"panel left-panel"},l.a.createElement("div",{className:"content"},l.a.createElement("h3",null,"New Here?"),l.a.createElement("p",null,"Sign Up and start using Smart Parking System to save time and reduce Pollution."),l.a.createElement("button",{className:"btn transparent",id:"login-btn",ref:R,onClick:function(){U.current.classList.add("sign-up-mode")}},"Sign Up")),l.a.createElement("img",{className:"image",src:"https://img.freepik.com/free-vector/smart-parking-man-user-with-smartphone-touch-screen-control-car-driving-to-park_33099-165.jpg",alt:""})),l.a.createElement("div",{className:"panel right-panel"},l.a.createElement("div",{className:"content"},l.a.createElement("h3",null,"One of us?"),l.a.createElement("p",null,"Welcome to Smart Parking System"),l.a.createElement("button",{className:"btn transparent",id:"sign-up-btn",ref:Y,onClick:function(){U.current.classList.remove("sign-up-mode")}},"Login")),l.a.createElement("img",{className:"image",src:"https://www.joy-mobility.com/img/joy-mobility-corp-carsharing-svg.svg",alt:""}))))});a(229);var O=function(){var e=Object(n.useContext)(h);return l.a.createElement("div",{className:"signed-in-links"},l.a.createElement("ul",null,l.a.createElement(s.b,{to:"/findSpace"},l.a.createElement("li",null,"Find Space")),l.a.createElement(s.b,{to:"/account"},l.a.createElement("li",null,"Account")),l.a.createElement(s.b,{to:"/book"},l.a.createElement("li",null,"Book")),l.a.createElement(s.b,{to:"/login"},l.a.createElement("li",{onClick:e.logout},"Logout"))))};var y=function(){return l.a.createElement("div",{className:"signed-out-links"},l.a.createElement("ul",null,l.a.createElement(s.b,{to:"/findSpace"},l.a.createElement("li",null,"Find Space")),l.a.createElement(s.b,{to:"/login"},l.a.createElement("li",null,"Login"))))},j=a(313),S=a(295),P=function(e){var t=e.user,a=e.darkMode,c=e.handleDarkMode,r=(Object(n.useRef)(null),Object(n.useContext)(h));return console.log(t),l.a.createElement("nav",null,l.a.createElement("div",{className:"header"},"Smart Parking System"),r.isLoggedIn?l.a.createElement(O,null):l.a.createElement(y,null),l.a.createElement("div",{className:"dark-mode-container"},l.a.createElement(j.a,{className:"dark-mode-btn",checked:a,onChange:c,size:"small"}),l.a.createElement(S.a,{className:"dark-mode-font"},"Dark Mode")))},w=a(39),C=a(40),I=a(44),L=a(42),x=(a(230),function(e){Object(I.a)(a,e);var t=Object(L.a)(a);function a(){return Object(w.a)(this,a),t.apply(this,arguments)}return Object(C.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"home"},l.a.createElement("div",{className:"intro"},l.a.createElement("h2",null,"Welcome to the Intelligent Parking System"),l.a.createElement("h5",null,"I am here to help you find parking places which are available before you step out of your house.")))}}]),a}(l.a.Component)),T=a(312),A=a(300),M=a(301),D=a(298),B=a(299),F=a(302),W=a(260),q=a(303),_=a(304),R=a(305),U=a(5),Y=a(71),z=a.n(Y),G=a(296),K=a(297),J=Object(G.a)((function(e){return{root:{display:"flex","& > * + *":{marginLeft:e.spacing(2)}}}})),Q=function(){var e=J();return l.a.createElement("div",{className:e.root},l.a.createElement(K.a,null))},X=(a(231),Object(U.a)((function(e){return{head:{backgroundColor:e.palette.common.black,color:e.palette.common.white},body:{fontSize:14}}}))(D.a)),H=Object(U.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover}}}}))(B.a),V=function(){var e=Object(n.useContext)(h),t=Object(n.useState)(),a=Object(o.a)(t,2),c=a[0],r=a[1],i=Object(n.useState)([]),s=Object(o.a)(i,2),u=s[0],m=s[1],d=Object(n.useState)([]),g=Object(o.a)(d,2),p=g[0],E=g[1],f=Object(n.useState)(!1),b=Object(o.a)(f,2),v=(b[0],b[1]),N=Object(n.useState)(!1),O=Object(o.a)(N,2),y=O[0],j=(O[1],Object(n.useState)(!1)),P=Object(o.a)(j,2);P[0],P[1];Object(n.useEffect)((function(){var t=k.database().ref("Booking");k.database().ref("users").orderByKey().equalTo("".concat(e.userID)).on("value",(function(e){var t=Object.values(e.val());m(t[0].previousBooking)})),t.orderByChild("bookingStatus").equalTo("active_".concat(e.userID)).on("value",(function(e){console.log(e.val()),E(e.val())})),k.database().ref("users").orderByKey().equalTo("".concat(e.userID)).on("value",(function(e){var t=Object.values(e.val());r(t[0])}))}),[]),console.log(u);return l.a.createElement("div",{className:"account"},c?l.a.createElement("div",{className:"account-info"},l.a.createElement("div",{className:"account-data"},l.a.createElement("h3",null,"Name"),l.a.createElement("p",null,c.username)),l.a.createElement("div",{className:"account-data"},l.a.createElement("h3",null,"Email"),l.a.createElement("p",null,c.email)),l.a.createElement("div",{className:"account-data"},l.a.createElement("h3",null,"Number Plate"),l.a.createElement("p",null,c.numberPlate))):l.a.createElement(Q,null),p||u?l.a.createElement("div",null,l.a.createElement(T.a,{className:"account-container"},l.a.createElement(A.a,{expandIcon:l.a.createElement(z.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},l.a.createElement(S.a,{className:"heading"},"All Bookings")),l.a.createElement(M.a,null,l.a.createElement(S.a,{className:"text"},l.a.createElement("div",{className:"previous-booking"},l.a.createElement(F.a,{component:W.a},l.a.createElement(q.a,{className:"table-container","aria-label":"customized table"},l.a.createElement(_.a,null,l.a.createElement(B.a,null,l.a.createElement(X,null,"Location"),l.a.createElement(X,{align:"right"},"Full Name"),l.a.createElement(X,{align:"right"},"Start Time"),l.a.createElement(X,{align:"right"},"End Time"),l.a.createElement(X,{align:"right"},"Number Plate"))),l.a.createElement(R.a,null,null===u?l.a.createElement(Q,null):Object.keys(u).map((function(e,t){return l.a.createElement(H,{key:t},l.a.createElement(X,{component:"th",scope:"row"},"Amroli"),l.a.createElement(X,{align:"right"},u[e].fullName),l.a.createElement(X,{align:"right"},u[e].bookingStartTime),l.a.createElement(X,{align:"right"},u[e].bookingEndTime),l.a.createElement(X,{align:"right"},u[e].numberPlate))}))))))))),l.a.createElement(T.a,null,l.a.createElement(A.a,{expandIcon:l.a.createElement(z.a,null),"aria-controls":"panel2a-content",id:"panel2a-header"},l.a.createElement(S.a,{className:"heading"},"Current Booking")),l.a.createElement(M.a,null,l.a.createElement(S.a,null,p?l.a.createElement("div",{className:"previous-booking"},l.a.createElement(F.a,{component:W.a},l.a.createElement(q.a,{className:"table-container","aria-label":"customized table"},l.a.createElement(_.a,null,l.a.createElement(B.a,null,l.a.createElement(X,null,"Location"),l.a.createElement(X,{align:"right"},"Full Name"),l.a.createElement(X,{align:"right"},"Start Time"),l.a.createElement(X,{align:"right"},"End Time"),l.a.createElement(X,{align:"right"},"Number Plate"))),l.a.createElement(R.a,null,Object.keys(p).map((function(e,t){return l.a.createElement(H,{key:t},l.a.createElement(X,{component:"th",scope:"row"},"Amroli"),l.a.createElement(X,{align:"right"},p[e].fullName),l.a.createElement(X,{align:"right"},p[e].bookingStartTime),l.a.createElement(X,{align:"right"},p[e].bookingEndTime),l.a.createElement(X,{align:"right"},p[e].numberPlate))})))))):l.a.createElement("div",null,"You have no current booking, plan one right now. "))))):l.a.createElement("div",null,l.a.createElement(T.a,{className:"account-container"},l.a.createElement(A.a,{expandIcon:l.a.createElement(z.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},l.a.createElement(S.a,{className:"heading"},"All Bookings")),l.a.createElement(M.a,null,l.a.createElement(S.a,{className:"text"},"Go ahead and plan your first booking with us!"))),l.a.createElement(T.a,null,l.a.createElement(A.a,{expandIcon:l.a.createElement(z.a,null),"aria-controls":"panel2a-content",id:"panel2a-header"},l.a.createElement(S.a,{className:"heading"},"Current Booking")),l.a.createElement(M.a,null,l.a.createElement(S.a,null,"Go ahead and plan your first booking with us!")))),l.a.createElement("div",{className:"payment"},y?l.a.createElement("div",null,l.a.createElement("button",{onClick:function(){v(!0)}},"PAY")):l.a.createElement("div",null,"No payment Info")))},Z=a(61),$=a(306),ee=a(307),te=a(308),ae=a(309),ne=a(114),le=a.n(ne),ce=(a(232),function(e){Object(I.a)(a,e);var t=Object(L.a)(a);function a(){var e;Object(w.a)(this,a);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={location:e.props.location,status:e.props.status,fullStatus:e.props.fullStatus,totalParkingLeft:e.props.totalParkingLeft,totalParkingSpace:e.props.totalParkingSpace,inputStyle:""},e.handleBooking=function(e){console.log("booking")},e}return Object(C.a)(a,[{key:"render",value:function(){var e={borderTop:"6px solid green"},t={borderTop:"6px solid red"};return l.a.createElement("div",{className:"parkingCard"},l.a.createElement("div",{className:"app-left"},l.a.createElement($.a,{className:"root"},l.a.createElement(ee.a,null,l.a.createElement(te.a,{className:"media",image:le.a}),l.a.createElement(ae.a,null,l.a.createElement(S.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Parking at ",this.state.location),l.a.createElement(S.a,{variant:"body2",color:"textSecondary",component:"p"},"Total Parking: ",this.state.totalParkingSpace),l.a.createElement(S.a,{variant:"body2",color:"textSecondary",component:"p"},"Available Parking: ",this.state.totalParkingLeft))),"Full"===this.state.fullStatus?l.a.createElement("div",{className:"booking-status"},"Parking Full, Check back in sometime!"):l.a.createElement("div",{className:"booking-status"},"Click on Book Tab to book parking"))),l.a.createElement("div",{className:"app-right"},l.a.createElement("div",{className:"car-status-display"},Object.entries(this.state.status).map((function(a,n){var c="Full"===a[1]?t:e;return"Full"===a[1]?l.a.createElement(W.a,{key:n,style:c,className:"car-display"},l.a.createElement("h4",null,n+1),l.a.createElement("img",{src:"https://cdn.iconscout.com/icon/free/png-256/car-booking-1817189-1538057.png",alt:"car"})):l.a.createElement(W.a,{style:c,className:"car-display"},l.a.createElement("h4",null,n+1))})))))}}]),a}(l.a.Component)),re=function(e){var t=l.a.createRef(),a=document.createElement("div");return Object(n.useEffect)((function(){r.a.render(l.a.Children.only(e.children),a),t.current.infowindow.setContent(a)}),[e.children]),l.a.createElement(Z.InfoWindow,Object.assign({ref:t},e))},oe={width:"50%",height:"90%"},ie=function(e){Object(I.a)(a,e);var t=Object(L.a)(a);function a(){var e;Object(w.a)(this,a);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={showingInfoWindow:!1,activeMarker:{},selectedPlace:{},location:"",status:[],parkingFullStatus:!1,totalParkingSpace:5,currentLatLng:null,totalParkingLeft:5},e.onMarkerClick=function(t,a,n){return e.setState({selectedPlace:t,activeMarker:a,showingInfoWindow:!0})},e.onClose=function(t){e.state.showingInfoWindow&&e.setState({showingInfoWindow:!1,activeMarker:null})},e.locationLatLng={lat:21.2352936,lng:72.8544311},e}return Object(C.a)(a,[{key:"componentDidMount",value:function(){var e=this;v.database().ref().child("Parking Lot A").on("value",(function(t){var a=t.val();console.log(a),e.setState({location:a.Location,status:a.parkingStatus,totalParkingSpace:a.totalParkingSpace,totalParkingLeft:a.totalParkingLeft,parkingFullStatus:a.parkingFullStatus})})),navigator.geolocation.getCurrentPosition((function(t){e.setState({currentLatLng:{lat:t.coords.latitude,lng:t.coords.longitude}})}))}},{key:"render",value:function(){return l.a.createElement("div",{className:"map"},l.a.createElement(Z.Map,{google:this.props.google,zoom:12,style:oe,initialCenter:this.locationLatLng},l.a.createElement(Z.Marker,{onClick:this.onMarkerClick,name:"Amroli",icon:!0===this.state.parkingFullStatus?"http://maps.google.com/mapfiles/ms/icons/red-dot.png":"http://maps.google.com/mapfiles/ms/icons/green-dot.png"}),l.a.createElement(re,{marker:this.state.activeMarker,visible:this.state.showingInfoWindow,onClose:this.onClose},l.a.createElement("div",null,l.a.createElement(ce,{location:this.state.location,status:this.state.status,fullStatus:this.state.parkingFullStatus,totalParkingLeft:this.state.totalParkingLeft,totalParkingSpace:this.state.totalParkingSpace})))))}}]),a}(l.a.Component),se=Object(Z.GoogleApiWrapper)({apiKey:"AIzaSyAJl_vD4QXRL_PovEIoKQpmFjyIrFjIGU8"})(ie),ue=a(52),me=function(){var e,t=Object(n.useRef)(),a=Object(n.useState)([]),c=Object(o.a)(a,2),r=c[0],i=c[1],s=Object(n.useState)(),u=Object(o.a)(s,2),m=u[0],d=u[1],g=Object(n.useState)(),p=Object(o.a)(g,2),E=(p[0],p[1]),f=[];Object(n.useEffect)((function(){k.database().ref("Parking Lot A/plateImg").on("value",(function(e){e.forEach((function(t){var a=t.key;console.log(a);var n=e.child(a).child("entryTime").val(),l=new Date(n).getDay();console.log(l),f.push(l)})),i(f),d(!0)}))}),[]),Object(n.useEffect)((function(){if(m){var a=ue.f(t.current).append("svg").attr("width",500).attr("height",500),n={top:20,right:10,bottom:100,left:80},l=400-n.left-n.right,c=400-n.top-n.bottom,o=a.append("g").attr("width",l).attr("height",c).attr("transform","translate(".concat(n.left,", ").concat(n.top,")")),i=o.append("g").attr("transform","translate(0, ".concat(c,")")),s=o.append("g"),u=ue.e().range([c,0]),d=ue.d().range([0,400]).paddingInner(.2).paddingOuter(.2),g=ue.a(d),p=ue.b(u).ticks(6).tickFormat((function(e){return e+" cars"}));i.selectAll("text").attr("transform","rotate(-40)").attr("text-anchor","end").attr("fill","orange");e=[{day:"Sunday",count:b(r,0)},{day:"Monday",count:b(r,1)},{day:"Tuesday",count:b(r,2)},{day:"Wednesday",count:b(r,3)},{day:"Thursday",count:b(r,4)},{day:"Friday",count:b(r,5)},{day:"Saturday",count:b(r,6)}],console.log(e),E(e),function(e){u.domain([0,ue.c(e,(function(e){return 5*e.count}))]),d.domain(e.map((function(e){return e.day})));var t=o.selectAll("rect").data(e);t.exit().remove(),t.attr("width",d.bandwidth).attr("fill","orange").attr("x",(function(e){return d(e.day)})).transition().duration(500).attr("height",(function(e){return c-u(e.count)})).attr("y",(function(e){return u(e.count)})),t.enter().append("rect").attr("width",d.bandwidth).attr("height",0).attr("fill","orange").attr("x",(function(e){return d(e.day)})).attr("y",c).transition().duration(500).attr("y",(function(e){return u(e.count)})).attr("height",(function(e){return c-u(e.count)})),i.call(g),s.call(p)}(e)}}),[m]);var b=function(e,t){return e.reduce((function(e,a){return t===a?e+1:e}),0)};return l.a.createElement("div",{ref:t})},de=(a(249),function(e){Object(I.a)(a,e);var t=Object(L.a)(a);function a(){var e;Object(w.a)(this,a);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={location:"",status:[],totalParkingSpace:20,inputStyle:""},e.handleSignout=function(){k.auth().signOut(),e.setState({isLoggedIn:!1})},e.mapStyles={width:"100%",height:"100%"},e}return Object(C.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"findSpace"},l.a.createElement("div",{className:"left"},l.a.createElement(se,null)),l.a.createElement("div",{className:"right"},l.a.createElement("div",{className:"data-visualization"},l.a.createElement(me,null))))}}]),a}(n.Component)),ge=a(37),pe=a.n(ge),Ee=a(115),fe=a(119),be=a.n(fe),he=a(118),ve=a.n(he),ke=a(97),Ne=a.n(ke),Oe=a(116),ye=a.n(Oe),je=a(33),Se=a.n(je),Pe=a(117),we=a.n(Pe),Ce=a(18),Ie=a(311),Le=a(120),xe=(a(256),function(e){Se.a.locale("en"),we()();var t,a=Object(i.g)(),c=k.messaging(),r=Object(n.useContext)(h),s=Se()().utcOffset("+05:30").format().slice(0,16),u=Se()().add(2,"days"),m=Se()(u._d).utcOffset("+05:30").format().slice(0,16),d=Object(n.useState)(),g=Object(o.a)(d,2),p=g[0],E=g[1],f=Object(n.useState)(!1),b=Object(o.a)(f,2),v=b[0],N=(b[1],Object(n.useState)([])),O=Object(o.a)(N,2),y=O[0],j=O[1],S=Object(n.useState)([]),P=Object(o.a)(S,2),w=P[0],C=P[1],I=Object(n.useState)(),L=Object(o.a)(I,2),x=L[0],T=L[1],A=Object(n.useState)(),M=Object(o.a)(A,2),D=M[0],B=M[1],F=Object(n.useState)(!0),q=Object(o.a)(F,2),_=q[0],R=q[1],U=Object(n.useState)([]),Y=Object(o.a)(U,2),z=Y[0],G=Y[1],K=Object(n.useState)(),J=Object(o.a)(K,2),Q=J[0],X=J[1],H=Object(n.useState)(!1),V=Object(o.a)(H,2),Z=V[0],$=V[1],ee=Object(n.useState)(),te=Object(o.a)(ee,2),ae=te[0],ne=te[1];Object(n.useEffect)((function(){v&&a.push("/account"),c.requestPermission().then((function(){return c.getToken()})).then((function(e){return console.log(e),ne(e),e})).catch((function(e){return console.log(e),e}))}),[]),k.messaging().onMessage((function(e){alert("Notification received!",e)})),Object(n.useEffect)((function(){r.userID&&k.database().ref("Booking").orderByChild("userId").equalTo("".concat(r.userID)).once("value",(function(e){if(e.exists()){R(!1);var t=Object.keys(e.val())[0];X(t),G(e.child(t).val()),e.child(t).val().arrived?$(!0):$(!1)}}))}),[_]),x&&D&&(t={location:p,userID:r.userID,fullName:y,numberPlate:w,bookingStartTime:Se()(x).utcOffset("+05:30").format().slice(0,16),bookingEndTime:Se()(D).utcOffset("+05:30").format().slice(0,16),bookingStatus:"active_".concat(r.userID),messagingToken:ae});var le=function(){var e=Object(Ee.a)(pe.a.mark((function e(a){return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,fetch("https://us-central1-smart-parking-system-9d0dc.cloudfunctions.net/newBooking",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(t)}).then((function(e){console.log(e),R(!1)})).catch((function(e){console.log("Error occurred while booking, Sorry!",e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement(W.a,null,l.a.createElement(Ce.a,{utils:Le.a},l.a.createElement("div",{className:"book"},l.a.createElement("div",{className:"booking-logo"},l.a.createElement("h1",null,"Book your parking"),l.a.createElement("img",{src:ye.a,alt:"booking"})),_?l.a.createElement("div",{className:"bookingForm-container"},l.a.createElement("form",{className:"bookingForm",onSubmit:le},l.a.createElement("div",{className:"booking-input"},l.a.createElement(ve.a,{className:"icon"}),l.a.createElement("select",{autoFocus:!0,name:"cars",className:"dropdown",value:p,onChange:function(e){return E(e.target.value)}},l.a.createElement("option",null,"Select a location"),l.a.createElement("option",{value:"Amroli"},"Amroli"))),l.a.createElement("div",{className:"booking-input"},l.a.createElement(be.a,{className:"icon"}),l.a.createElement("input",{required:!0,type:"text",placeholder:"Full Name",value:y,onChange:function(e){return j(e.target.value)}})),l.a.createElement("div",{className:"booking-input"},l.a.createElement("img",{className:"number-plate",src:"https://cdn.iconscout.com/icon/premium/png-256-thumb/number-plate-1582888-1337733.png",alt:"number plate"}),l.a.createElement("input",{type:"text",placeholder:"Number Plate",value:w,required:!0,onChange:function(e){return C(e.target.value)}})),l.a.createElement("div",{className:"booking-input"},l.a.createElement(Ne.a,{className:"icon"}),l.a.createElement(Ie.a,{value:x,onChange:T,label:"Booking Start Time",onError:console.log,minDate:s,maxDate:m,format:"yyyy/MM/dd hh:mm a",minutesStep:15})),l.a.createElement("div",{className:"booking-input"},l.a.createElement(Ne.a,{className:"icon"}),l.a.createElement(Ie.a,{value:D,onChange:B,label:"Booking End Time",onError:console.log,minDate:s,maxDate:m,format:"yyyy/MM/dd hh:mm a",minutesStep:15})),l.a.createElement("input",{type:"submit",value:"Book",className:"booking-btn"}))):l.a.createElement("div",{className:"booking-receipt"},l.a.createElement("div",{className:"booking-receipt-header"},"Booking Receipt"),l.a.createElement("div",{className:"booking-receipt-container"},l.a.createElement("table",{className:"receipt-info"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Full Name"),l.a.createElement("th",null,"Booking No.")),l.a.createElement("tr",null,l.a.createElement("td",null,z.fullName),l.a.createElement("td",null,Q)),l.a.createElement("tr",null,l.a.createElement("th",null,"Booking Start Time: "),l.a.createElement("th",null,"Booking End Time: ")),l.a.createElement("tr",null,l.a.createElement("td",null,Se()(z.bookingStartTime).format("MMMM Do YYYY, h:mm a")),l.a.createElement("td",null,Se()(z.bookingEndTime).format("MMMM Do YYYY, h:mm a"))),l.a.createElement("tr",null,l.a.createElement("th",null,"Number Plate"),l.a.createElement("th",{colSpan:"2"},"Parking Number")),l.a.createElement("tr",null,l.a.createElement("td",null,z.numberPlate),l.a.createElement("td",null,z.bookingParkingNumber)),l.a.createElement("tr",{className:"parking-status"},l.a.createElement("th",null,"Parking Status:"),l.a.createElement("td",null,Z?"Arrived":"Not yet Arrived")))))))))}),Te=a(121),Ae=a(310),Me=(a(257),function(){var e,t=Object(n.useState)(!1),a=Object(o.a)(t,2),c=a[0],r=a[1],u=Object(n.useState)(!1),m=Object(o.a)(u,2),d=m[0],g=m[1],p=Object(n.useState)(""),E=Object(o.a)(p,2),f=E[0],b=E[1],v=Object(n.useCallback)((function(){g(!0)}),[]),O=Object(n.useCallback)((function(){})),y=Object(n.useCallback)((function(){g(!1),k.auth().signOut()}),[]);console.log(d),k.auth().onAuthStateChanged((function(e){e&&(console.log(e),g(!0),b(e.uid))})),e=d?l.a.createElement(i.d,null,l.a.createElement(i.b,{path:"/account"},l.a.createElement(V,null)),l.a.createElement(i.b,{path:"/book"},l.a.createElement(xe,null)),l.a.createElement(i.b,{path:"/findSpace"},l.a.createElement(de,null)),l.a.createElement(i.a,{to:"/"})):l.a.createElement(i.d,null,l.a.createElement(i.b,{path:"/",exact:!0},l.a.createElement(x,null)),l.a.createElement(i.b,{path:"/findSpace"},l.a.createElement(de,null)),l.a.createElement(i.b,{path:"/login",render:function(e){return l.a.createElement(N,Object.assign({userID:f},e))}}),l.a.createElement(i.a,{to:"/login"}));var j=Object(Te.a)({palette:{type:c?"dark":"light"}});return l.a.createElement(h.Provider,{value:{isLoggedIn:d,login:v,logout:y,signUp:O,userID:f}},l.a.createElement(Ae.a,{theme:j},l.a.createElement("div",{className:"app"},l.a.createElement(W.a,{className:"main-container"},l.a.createElement(s.a,null,l.a.createElement(P,{darkMode:c,handleDarkMode:function(){r(!1===c)}}),e)))))});r.a.render(l.a.createElement(Me,null),document.getElementById("root"))}},[[207,1,2]]]);
//# sourceMappingURL=main.6c02225a.chunk.js.map